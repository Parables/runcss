{"version":3,"file":"runcss.modern.js","sources":["../src/runcss.js"],"sourcesContent":["const isNum = (v) => !isNaN(v)\r\nconst isStartNum = (v) => !isNaN(parseInt(v))\r\nconst split = (s) => s.split(',')\r\nconst indexOf = (s, v) => split(s).indexOf(v)\r\nconst includes = (s, v) => split(s).includes(v)\r\nconst ifRemTo = (v) => isNum(v) ? negative + Number(v) * 0.25 + 'rem' : v\r\nconst elementClassesCache = new Map()\r\nconst classesCache = new Map()\r\n\r\nconst styleElement = document.createElement('style')\r\ndocument.head.appendChild(styleElement)\r\nlet sheet = styleElement.sheet\r\n\r\nconst media = new Map()\r\n\r\nfor (let a of split('sm|@media(min-width:640px){},md|@media(min-width:768px){},lg|@media(min-width:1024px){},xl|@media(min-width:1280px){}')) {\r\n  a = a.split('|')\r\n  media.set(a[0], sheet.cssRules[sheet.insertRule(a[1], sheet.cssRules.length)])\r\n}\r\n\r\n// sheet.insertRule(':root{--color-opacity:1}', sheet.length)\r\n\r\nlet cls\r\nlet originalClass\r\nlet classAdd\r\n\r\nexport function processClasses (classes) {\r\n  if (elementClassesCache.has(classes)) {\r\n    return\r\n  }\r\n  elementClassesCache.set(classes, true)\r\n  classes = classes.replace(/\\s\\s+/g, ' ').split(' ')\r\n  for (cls of classes) {\r\n    if (classesCache.has(cls)) {\r\n      continue\r\n    }\r\n    processClass()\r\n    classesCache.set(cls, true)\r\n  }\r\n}\r\n\r\nconst formatters = new Map([\r\n  ['p', 'padding'],\r\n  ['m', 'margin'],\r\n  ['h', 'height'],\r\n  ['z', 'z-index'],\r\n  ['w', 'width']\r\n])\r\n\r\nconst positions = new Map([\r\n  ['t', '-top'],\r\n  ['b', '-bottom'],\r\n  ['l', '-left'],\r\n  ['r', '-right']\r\n])\r\n\r\nconst classNames = new Map([\r\n  ['container', () => {\r\n    setRule('width:100%')\r\n    const m = ['640px', '768px', '1024px', '1280px']\r\n    media.values().forEach((s, index) => {\r\n      sheet = s\r\n      setRule('max-width:' + m[index])\r\n    })\r\n  }],\r\n  ['clearfix', () => {\r\n    originalClass = 'clearfix::after'\r\n    setRule('content:\"\"!important;display:table!important;clear:both')\r\n  }],\r\n  ['font-sans', 'font-family:system-ui,-apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,\"Helvetica Neue\",Arial,\"Noto Sans\",sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\",\"Segoe UI Symbol\",\"Noto Color Emoji\"'],\r\n  ['font-serif', 'font-family:Georgia,Cambria,\"Times New Roman\",Times,serif'],\r\n  ['font-mono', 'font-family:Menlo,Monaco,Consolas,\"Liberation Mono\",\"Courier New\",monospace']\r\n])\r\n\r\n// example: object-left-bottom -> object-position: left bottom\r\nconst convertClasses1 = (cName, value) => {\r\n  const hPos = cName.indexOf('-') + 1\r\n  classNames.set(cName, cName.slice(0, hPos) + value + ':' + cName.slice(hPos).replace('-', ' '))\r\n}\r\n\r\n// direct map from class to values\r\nfor (const c of split('box-border|box-sizing:border-box,box-content|box-sizing:content-box,hidden|display:none,object-scale-down|object-fit:scale-down,scrolling-touch|-webkit-overflow-scrolling:touch,scrolling-auto|-webkit-overflow-scrolling:auto,visible|visibility:visible,invisible|visibility:hidden,flex-row|flex-direction:row,flex-row-reverse|flex-direction:row-reverse,flex-col|flex-direction:column,flex-col-reverse|flex-direction:column-reverse,flex-no-wrap|flex-wrap:nowrap,flex-wrap|flex-wrap:wrap,flex-wrap-reverse|flex-wrap:wrap-reverse,items-stretch|align-items:stretch,items-start|align-items:flex-start,items-center|align-items:center,items-end|align-items:flex-end,items-baseline|align-items:baseline,content-start|align-content:flex-start,content-center|align-content:center,content-end|align-content:flex-end,content-between|align-content:space-between,content-around|align-content:space-around,self-auto|align-self:auto,self-start|align-self:flex-start,self-center|align-self:center,self-end|align-self:flex-end,self-stretch|align-self:stretch,justify-start|justify-content:flex-start,justify-center|justify-content:center,justify-end|justify-content:flex-end,justify-between|justify-content:space-between,justify-around|justify-content:space-around,flex-grow|flex-grow:1,flex-grow-0|flex-grow:0,flex-shrink|flex-shrink:1,flex-shrink-0|flex-shrink:0,order-first|order:-9999,order-last|order:9999,order-none|order:0,grid-cols-none|grid-template-columns:none,col-auto|grid-column:auto,col-start-auto|grid-column-start:auto,col-end-auto|grid-column-end:auto,grid-rows-none|grid-template-rows:none,row-auto|grid-row:auto,row-start-auto|grid-row-start:auto,row-end-auto|grid-row-end:auto,gap-px|gap:1px,row-gap-px|row-gap:1px,col-gap-px|column-gap:1px,grid-flow-row|grid-auto-flow:row,grid-flow-col|grid-auto-flow:column,grid-flow-row-dense|grid-auto-flow:row dens,grid-flow-col-dense|grid-auto-flow:column dense,min-w-full|min-width:100%,max-w-full|max-width:100%,max-w-screen-sm|max-width:640px,max-w-screen-md|max-width:768px,max-w-screen-lg|max-width:1024px,max-w-screen-xl|max-width:1280px,max-w-none|max-width:none,min-h-full|min-height:100%,min-h-screen|min-height:100vh,max-h-full|max-height:100%,max-h-screen|max-height:100vh,text-2xl|font-size:1.5rem,text-3xl|font-size:1.875rem,text-4xl|font-size:2.25rem,text-left|text-align:left,text-center|text-align:center,text-right|text-align:right,text-justify|text-align:justify,underline|text-decoration:underline,line-through|text-decoration:line-through,no-underline|text-decoration:none,uppercase|text-transform:uppercase,lowercase|text-transform:lowercase,capitalize|text-transform:capitalize,normal-case|text-transform:none,whitespace-no-wrap|white-space:nowrap,break-normal|word-break:normal!important;overflow-wrap:normal,break-words|overflow-wrap:break-word,break-all|word-break:break-all,truncate|overflow:hidden!important;text-overflow:ellipsis!important;white-space:nowrap,flex-initial|flex: 0 1 auto,flex-none|flex:none,h-auto|height:auto,max-w-2xl|max-width:42rem,tracking-tighter|letter-spacing:-0.05em,tracking-tight|letter-spacing:-0.025em,tracking-normal|0,tracking-wide:letter-spacing:0.025em,tracking-wider|letter-spacing:0.05em,tracking-widest|letter-spacing: 0.1em,leading-none|line-height:1,leading-tight|line-height:1.25,leading-snug|line-height:1.375,leading-normal|line-height:1.5,leading-relaxed|line-height:1.625,leading-loose|line-height:2,list-none|list-style-type:none,list-disc|list-style-type:disc,list-decimal|list-style-type:decimal,list-inside|list-style-position:inside,list-outside|list-style-position:outside')) {\r\n  classNames.set(...c.split('|'))\r\n}\r\n\r\n// for (const c of []) {\r\n\r\nfor (const c of split('object-contain,object-cover,object-fill,object-none,object-bottom')) {\r\n  convertClasses1(c, 'fit')\r\n}\r\n\r\nfor (const c of split('object-bottom,object-center,object-left,object-left-bottom,object-left-top,object-right,object-right-bottom,object-right-top,object-top')) {\r\n  convertClasses1(c, 'position')\r\n}\r\n\r\n// class to value\r\nfor (const c of split('float-right,float-left,float-none,clear-left,clear-right,clear-both,clear-none')) {\r\n  classNames.set(c, c.replace('-', ':'))\r\n}\r\n\r\n// display\r\nfor (const c of split('block,flow-root,inline-block,inline,flex,grid,inline-grid,table,table-caption,table-cell,table-column,table-column-group,table-footer-group,table-header-group,table-row-group,table-row')) {\r\n  classNames.set(c, 'display:' + c)\r\n}\r\n\r\n// position\r\nfor (const c of split('static,fixed,absolute,relative,sticky')) {\r\n  classNames.set(c, 'position:' + c)\r\n}\r\n\r\n/*\r\nconst processClass1 = (value) => {\r\n  const hPos = cls.indexOf('-') + 1\r\n  setRule(cls.slice(0, hPos) + value + ':' + cls.slice(hPos).replace('-', ' '))\r\n}\r\n*/\r\nconst colors = split('f7fafc,edf2f7,e2e8f0,cbd5e0,a0aec0,718096,4a5568,2d3748,1a202c,fff5f5,fed7d7,feb2b2,fc8181,f56565,e53e3e,c53030,9b2c2c,742a2a,fffaf0,feebc8,fbd38d,f6ad55,ed8936,dd6b20,c05621,9c4221,7b341e,fffff0,fefcbf,faf089,f6e05e,ecc94b,d69e2e,b7791f,975a16,744210,f0fff4,c6f6d5,9ae6b4,68d391,48bb78,38a169,2f855a,276749,22543d,e6fffa,b2f5ea,81e6d9,4fd1c5,38b2ac,319795,2c7a7b,285e61,234e52,ebf8ff,bee3f8,90cdf4,63b3ed,4299e1,3182ce,2b6cb0,2c5282,2a4365,ebf4ff,c3dafe,a3bffa,7f9cf5,667eea,5a67d8,4c51bf,434190,3c366b,faf5ff,e9d8fd,d6bcfa,b794f4,9f7aea,805ad5,6b46c1,553c9a,44337a,fff5f7,fed7e2,fbb6ce,f687b3,ed64a6,d53f8c,b83280,97266d,702459')\r\n\r\nconst colorNames = split('gray,red,orange,yellow,green,teal,blue,indigo,purple,pink')\r\n\r\nconst setColor = (type) => {\r\n  // const colorRule = () => setRule(type + '-color:' + color)\r\n  if (partsLength > 3) {\r\n    notFound()\r\n    return\r\n  }\r\n  const starting = secondPart.slice(0, 3)\r\n  if (starting.startsWith('#') || includes('rgb,hsl', starting) || includes('transparent,current', secondPart)) {\r\n    setRule(type + ':' + secondPart)\r\n    return\r\n  }\r\n  let color\r\n  if (partsLength === 3) {\r\n    if (thirdPart.length !== 3 || !thirdPart.endsWith('00')) {\r\n      notFound()\r\n      return\r\n    }\r\n    const colorPos = colorNames.indexOf(secondPart)\r\n    if (colorPos === -1) {\r\n      notFound()\r\n      return\r\n    }\r\n    color = colors[colorPos * 9 + (Number(thirdPart[0]) - 1)]\r\n    const rgba = type + `:rgba(${parseInt(color.slice(0, 2), 16)},${parseInt(color.slice(2, 4), 16)},${parseInt(color.slice(4, 6), 16)},var(--${type}-opacity,1))`\r\n    setRule(type + `:#${color}!important;` + rgba)\r\n    return\r\n  } else {\r\n    if (secondPart === 'black') {\r\n      color = '#000'\r\n    } else if (secondPart === 'white') {\r\n      color = '#fff'\r\n    }\r\n    if (color !== undefined) {\r\n      setRule(type + ':' + color)\r\n      return\r\n    }\r\n  }\r\n  notFound()\r\n}\r\n\r\nconst setOpacity = (type) => {\r\n  if (isNaN(thirdPart)) {\r\n    notFound()\r\n    return\r\n  }\r\n  setRule(`--${type}:` + (thirdPart === '100' ? '1' : '0.' + thirdPart))\r\n}\r\n\r\nconst setPosition = () => {\r\n  if (!includes('auto,initial,inherit', lastPart) && !isStartNum(lastPart)) {\r\n    notFound()\r\n    return\r\n  }\r\n  const v = negative + lastPart\r\n  if (partsLength === 3) {\r\n    if (secondPart === 'y') {\r\n      setRule(`top:${v}!important;bottom:` + v)\r\n      return\r\n    } else if (secondPart === 'x') {\r\n      setRule(`left:${v}!important;right:` + v)\r\n      return\r\n    }\r\n  } else if (partsLength === 2) {\r\n    if (firstPart === 'inset') {\r\n      setRule(`top:${v}!important;right:${v}!important;bottom:${v}!important;left:` + v)\r\n      return\r\n    }\r\n    setRule(firstPart + ':' + v)\r\n    return\r\n  }\r\n  notFound()\r\n}\r\n\r\nconst cls2process = new Map([\r\n  ['overflow', () => {\r\n    setRule(firstPart + `-${secondPart}:` + thirdPart)\r\n  }],\r\n  ['text', () => {\r\n    if (partsLength === 2) {\r\n      const pos = indexOf('xs,sm,base,lg,xl', secondPart)\r\n      if (pos > -1) {\r\n        setRule(`font-size:${0.75 + (0.125 * pos)}rem`)\r\n        return\r\n      }\r\n      if (secondPart.endsWith('xl')) {\r\n        const [num] = secondPart.split('x')\r\n        if (isNum(num)) {\r\n          setRule(`font-size:${Number(num) - 2}rem`)\r\n          return\r\n        }\r\n      }\r\n    }\r\n    if (partsLength === 3) {\r\n      if (secondPart === 'opacity') {\r\n        setOpacity('color-opacity')\r\n        return\r\n      }\r\n    }\r\n    setColor('color')\r\n  }],\r\n  ['font', () => {\r\n    if (partsLength === 2) {\r\n      const pos = indexOf('hairline,thin,light,normal,medium,semibold,bold,extrabold,black', secondPart)\r\n      if (pos > -1) {\r\n        setRule('font-weight:' + (100 * (1 + pos)))\r\n        return\r\n      }\r\n    }\r\n    notFound()\r\n  }],\r\n  ['whitespace', () => {\r\n    if (includes('normal,pre,pre-line,pre-wrap', rest)) {\r\n      setRule('white-space:' + rest)\r\n      return\r\n    }\r\n    notFound()\r\n  }],\r\n  ['inset', setPosition],\r\n  ['top', setPosition],\r\n  ['right', setPosition],\r\n  ['bottom', setPosition],\r\n  ['left', setPosition],\r\n  ['flex', () => {\r\n    if (secondPart === 'grow' || secondPart === 'shrink') {\r\n      if (partsLength === 2) {\r\n        setRule(`flex-${secondPart}:1`)\r\n        return\r\n      } else if (partsLength === 3 && isNum(thirdPart)) {\r\n        setRule(`flex-${secondPart}:` + thirdPart)\r\n        return\r\n      }\r\n      notFound()\r\n    }\r\n    if (!isNum(secondPart) && secondPart !== 'auto') {\r\n      notFound()\r\n      return\r\n    }\r\n    if (partsLength === 2) {\r\n      setRule(`flex:${secondPart} 1 0%`)\r\n      return\r\n    }\r\n    if (partsLength === 3 && (isNum(thirdPart) || thirdPart === 'auto')) {\r\n      setRule(`flex:${secondPart} ${thirdPart} 0%`)\r\n      return\r\n    }\r\n    const fp = parts[3]\r\n    if (partsLength === 4 && (isNum(thirdPart) || thirdPart === 'auto') && (isStartNum(fp) || fp === 'auto')) {\r\n      setRule(`flex:${secondPart} ${thirdPart} ` + fp)\r\n      return\r\n    }\r\n    notFound()\r\n  }],\r\n  ['order', () => {\r\n    if (partsLength !== 2 || !isNum(secondPart)) {\r\n      notFound()\r\n      return\r\n    }\r\n    setRule(firstPart + ':' + negative + secondPart)\r\n  }],\r\n  ['grid', () => {\r\n    if (partsLength === 3 && isNum(thirdPart)) {\r\n      switch (secondPart) {\r\n        case 'cols':\r\n          setRule(`grid-template-columns: repeat(${thirdPart}, minmax(0, 1fr))`)\r\n          return\r\n        case 'span':\r\n          setRule(`grid-column: span ${thirdPart} / span ` + thirdPart)\r\n          return\r\n        case 'start':\r\n          setRule('grid-column-start:' + thirdPart)\r\n          return\r\n        case 'end':\r\n          setRule('grid-column-end:' + thirdPart)\r\n          return\r\n        case 'rows':\r\n          setRule(`grid-template-rows: repeat(${thirdPart}, minmax(0, 1fr))`)\r\n          return\r\n      }\r\n    }\r\n    notFound()\r\n  }],\r\n  ['row', () => {\r\n    if (partsLength === 3 && isStartNum(thirdPart)) {\r\n      switch (secondPart) {\r\n        case 'span':\r\n          setRule(`grid-row: span ${thirdPart} / span ${thirdPart}`)\r\n          return\r\n        case 'start':\r\n          setRule('grid-row-start:' + thirdPart)\r\n          return\r\n        case 'end':\r\n          setRule('grid-row-end:' + thirdPart)\r\n          return\r\n        case 'gap':\r\n          setRule('row-gap:' + ifRemTo(thirdPart))\r\n          return\r\n      }\r\n    }\r\n    notFound()\r\n  }],\r\n  ['col', () => {\r\n    if (partsLength === 3 && isStartNum(thirdPart)) {\r\n      switch (secondPart) {\r\n        case 'gap':\r\n          setRule('column-gap:' + ifRemTo(thirdPart))\r\n          return\r\n      }\r\n    }\r\n    notFound()\r\n  }],\r\n  ['gap', () => {\r\n    if (partsLength === 2 && isStartNum(secondPart)) {\r\n      setRule('gap:' + ifRemTo(secondPart))\r\n      return\r\n    }\r\n    notFound()\r\n  }],\r\n  ['space', () => {\r\n    classAdd = '>:not(template)~:not(template)'\r\n    if (thirdPart === 'px') {\r\n      thirdPart = '1px'\r\n    }\r\n    if (partsLength === 3) {\r\n      if (isStartNum(thirdPart)) {\r\n        const v = ifRemTo(thirdPart)\r\n        if (secondPart === 'x') {\r\n          setRule(`margin-right:calc(${v}*var(--space-x-reverse,0))!important;margin-left:calc(${v}*(1 - var(--space-x-reverse,0)))`)\r\n          return\r\n        } else if (secondPart === 'y') {\r\n          setRule(`margin-top:calc(${v}*(1 - var(--space-y-reverse,0)))!important; margin-bottom:calc(${v}*var(--space-y-reverse,0))`)\r\n          return\r\n        }\r\n      } else if (thirdPart === 'reverse') {\r\n        if (secondPart === 'y' || secondPart === 'x') {\r\n          setRule(`--space-${secondPart}-reverse:1`)\r\n          return\r\n        }\r\n      }\r\n    }\r\n    notFound()\r\n  }],\r\n  ['min', () => {\r\n    if (partsLength === 3 && isStartNum(thirdPart)) {\r\n      if (secondPart === 'w' || secondPart === 'h') {\r\n        const p = secondPart === 'w' ? 'width' : 'height'\r\n        setRule(`min-${p}:` + thirdPart)\r\n        return\r\n      }\r\n    }\r\n    notFound()\r\n  }],\r\n  ['max', () => {\r\n    if (partsLength === 3) {\r\n      if (secondPart === 'w') {\r\n        const pos = indexOf('xs,sm,md,lg,xl', thirdPart)\r\n        if (pos > -1) {\r\n          setRule(`max-width:${pos * 4 + 20}rem`)\r\n          return\r\n        } else if (isStartNum(thirdPart)) {\r\n          if (thirdPart.endsWith('xl')) {\r\n            setRule(`max-width:${parseInt(thirdPart) * 8 + 24}rem`)\r\n            return\r\n          }\r\n          setRule('max-width:' + thirdPart)\r\n          return\r\n        }\r\n      } else if (secondPart === 'h' && isStartNum(thirdPart)) {\r\n        setRule('max-height:' + thirdPart)\r\n        return\r\n      }\r\n    }\r\n    notFound()\r\n  }],\r\n  ['tracking', () => {\r\n    if (partsLength === 2 && isStartNum(secondPart)) {\r\n      setRule('letter-spacing:' + secondPart)\r\n      return\r\n    }\r\n    notFound()\r\n  }],\r\n  ['leading', () => {\r\n    if (partsLength === 2) {\r\n      if (isNum(secondPart)) {\r\n        setRule(`line-height:${Number(secondPart) * 0.25}rem`)\r\n        return\r\n      }\r\n      if (isStartNum(secondPart)) {\r\n        setRule('line-height:' + secondPart)\r\n        return\r\n      }\r\n    }\r\n    notFound()\r\n  }],\r\n  ['placeholder', () => {\r\n    classAdd = '::placeholder'\r\n    if (partsLength === 3) {\r\n      if (secondPart === 'opacity') {\r\n        setOpacity('color-opacity')\r\n        return\r\n      }\r\n    }\r\n    setColor('color')\r\n  }],\r\n  ['align', () => {\r\n    if (includes('baseline,top,middle,bottom,text-top,text-bottom', rest)) {\r\n      setRule('vertical-align:' + rest)\r\n      return\r\n    }\r\n    notFound()\r\n  }],\r\n  ['bg', () => {\r\n    rest = rest.replace('-', ' ')\r\n    if (includes('bottom,center,left,left bottom,left top,right,right bottom,right top,top', rest)) {\r\n      setRule('background-position:' + rest)\r\n      return\r\n    }\r\n    if (includes('repeat,no-repeat,repeat-x,repeat-y', rest)) {\r\n      setRule('background-repeat:' + rest)\r\n      return\r\n    }\r\n    if (includes('repeat-round,repeat-space', rest)) {\r\n      setRule('background-repeat:' + thirdPart)\r\n      return\r\n    }\r\n    if (includes('auto,cover,contain', rest)) {\r\n      setRule('background-size:' + rest)\r\n      return\r\n    }\r\n    if (partsLength === 2) {\r\n      if (includes('fixed,local,scroll', secondPart)) {\r\n        setRule('background-attachment:' + secondPart)\r\n        return\r\n      }\r\n    }\r\n    if (partsLength === 3) {\r\n      if (secondPart === 'opacity') {\r\n        setOpacity('background-color')\r\n        return\r\n      }\r\n    }\r\n    setColor('background-color')\r\n  }],\r\n  ['rounded']\r\n\r\n])\r\n\r\nlet parts\r\nlet firstPart // first  part\r\nlet secondPart // second part\r\nlet thirdPart // third part\r\nlet lastPart // last part\r\nlet partsWithoutEnd // without end\r\nlet rest\r\nlet partsLength // parts.length\r\nlet negative\r\n\r\nfunction processClass () {\r\n  sheet = styleElement.sheet\r\n  negative = ''\r\n  classAdd = ''\r\n  originalClass = cls\r\n  parts = cls.split(':')\r\n  if (parts.length > 1) {\r\n    cls = parts[parts.length - 1]\r\n    if (media.has(parts[0])) {\r\n      sheet = media.get(parts[0])\r\n    }\r\n  }\r\n  if (cls[0] === '-') {\r\n    negative = '-'\r\n    cls = cls.slice(1)\r\n  }\r\n  if (cls.length < 3) {\r\n    notFound()\r\n    return\r\n  }\r\n  parts = cls.split('-')\r\n  partsLength = parts.length\r\n  ;[firstPart, secondPart, thirdPart] = parts\r\n  lastPart = parts[partsLength - 1]\r\n  partsWithoutEnd = parts.slice(0, -1).join('-')\r\n  rest = parts.slice(1).join('-')\r\n  if (firstPart.length < 3 && firstPart !== 'bg') {\r\n    formatClass()\r\n    return\r\n  }\r\n  const classValue = classNames.get(cls)\r\n  if (classValue !== undefined) {\r\n    if (typeof classValue === 'function') {\r\n      classValue()\r\n    } else {\r\n      setRule(classValue)\r\n    }\r\n    return\r\n  }\r\n  if (partsLength < 2) {\r\n    notFound()\r\n    return\r\n  }\r\n  const process = cls2process.get(firstPart)\r\n  if (typeof process === 'function') {\r\n    process()\r\n    return\r\n  }\r\n  notFound()\r\n}\r\n\r\nfunction formatClass () {\r\n  let v\r\n  if (secondPart === 'px') {\r\n    v = `${negative}1px`\r\n  } else if (secondPart === 'full') {\r\n    v = '100%'\r\n  } else if (secondPart === 'screen') {\r\n    if (firstPart === 'w') {\r\n      v = '100vw'\r\n    } else if (firstPart === 'h') {\r\n      v = '100vh'\r\n    } else {\r\n      notFound()\r\n      return\r\n    }\r\n  } else if (isNum(secondPart)) {\r\n    v = negative + Number(secondPart) * 0.25 + 'rem'\r\n  } else if (secondPart.indexOf('/') > -1) {\r\n    let [top, bottom] = secondPart.split('/')\r\n    top = Number(top)\r\n    bottom = Number(bottom)\r\n    if (isNaN(top) || isNaN(bottom)) {\r\n      notFound()\r\n      return\r\n    }\r\n    v = negative + (Number(top) / Number(bottom)).toFixed(6) + '%'\r\n  } else if (isStartNum(secondPart)) {\r\n    v = negative + secondPart\r\n  } else {\r\n    notFound()\r\n    return\r\n  }\r\n\r\n  const basicPart = formatters.get(firstPart[0])\r\n  if (basicPart === undefined) {\r\n    notFound()\r\n    return\r\n  }\r\n  if (firstPart.length > 1) {\r\n    if (firstPart[1] === 'x') {\r\n      setRule(basicPart + `-right:${v}!important;${basicPart}-left:` + v)\r\n    } else if (firstPart[1] === 'y') {\r\n      setRule(basicPart + `-top:${v}!important;${basicPart}-bottom:` + v)\r\n    } else {\r\n      const position = positions.get(firstPart[1])\r\n      if (position === undefined) {\r\n        notFound()\r\n        return\r\n      }\r\n      setRule(basicPart + position + ':' + v)\r\n    }\r\n  } else {\r\n    setRule(basicPart + ':' + v)\r\n  }\r\n}\r\n\r\n// for (const s of document.styleSheets) {\r\n//   console.log(s)\r\n// }\r\n\r\nfunction notFound () {\r\n  if (sheet === styleElement.sheet) {\r\n    return\r\n  }\r\n  for (const s of document.styleSheets) {\r\n    console.log(s)\r\n    for (const rule of s.cssRules) {\r\n      // eslint-disable-next-line no-undef\r\n      if (rule.type === CSSRule.STYLE_RULE) {\r\n        if (rule.selectorText.split(',').map((item) => item.trim()).includes('.' + cls)) {\r\n          cls = originalClass.replace(/[.:]/, '\\\\$&')\r\n          console.log(`.${cls}${rule.cssText.slice(rule.cssText.indexOf('{'))}`)\r\n          sheet.insertRule(`.${cls}${rule.cssText.slice(rule.cssText.indexOf('{'))}`, sheet.length)\r\n          return\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nfunction setRule (t) {\r\n  cls = originalClass.replace(/[.:()%,]/g, '\\\\$&') + classAdd\r\n  console.log(`.${cls}{${t}!important}`)\r\n  sheet.insertRule(`.${cls}{${t}!important}`, sheet.length)\r\n}\r\n"],"names":["isNum","v","isNaN","isStartNum","parseInt","split","s","indexOf","includes","ifRemTo","negative","Number","elementClassesCache","Map","classesCache","styleElement","document","createElement","head","appendChild","sheet","media","a","set","cssRules","insertRule","length","cls","originalClass","classAdd","processClasses","classes","has","replace","processClass","formatters","positions","classNames","setRule","m","values","forEach","index","convertClasses1","cName","value","hPos","slice","c","colors","colorNames","setColor","type","partsLength","notFound","starting","secondPart","startsWith","color","undefined","thirdPart","endsWith","colorPos","rgba","setOpacity","setPosition","lastPart","firstPart","cls2process","pos","num","rest","fp","parts","partsWithoutEnd","get","join","top","bottom","toFixed","basicPart","position","formatClass","classValue","process","styleSheets","console","log","rule","CSSRule","STYLE_RULE","selectorText","map","item","trim","cssText","t"],"mappings":"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"}